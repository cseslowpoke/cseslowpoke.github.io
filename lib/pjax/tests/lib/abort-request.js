"use strict";function _typeof(t){function e(t){return n.apply(this,arguments)}var n,r;function o(t){return r.apply(this,arguments)}return(_typeof="function"==typeof Symbol&&"symbol"===_typeof(Symbol.iterator)?(r=function(t){return void 0===t?"undefined":_typeof(t)},o.toString=function(){return r.toString()},o):(n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":void 0===t?"undefined":_typeof(t)},e.toString=function(){return n.toString()},e))(t)}var nativeOpen,tape=require("tape"),abortRequest=require("../../lib/abort-request.js"),sendRequest=require("../../lib/send-request.js");"responseURL"in XMLHttpRequest.prototype||(nativeOpen=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(t,e){return this.responseURL=e,nativeOpen.apply(this,arguments)}),tape("test aborting xhr request",function(t){var n=sendRequest.bind({options:{cacheBust:!0}});t.test("- pending request is aborted",function(t){var e=n("https://httpbin.org/delay/10",{},function(){t.fail("xhr was not aborted")});t.equal(e.readyState,1,"xhr readyState is '1' (SENT)"),abortRequest(e),t.equal(e.readyState,0,"xhr readyState is '0' (ABORTED)"),t.equal(e.status,0,"xhr HTTP status is '0' (ABORTED)"),t.equal(e.responseText,"","xhr response is empty"),t.end()}),t.test("- request is not aborted if it has already completed",function(t){var e=n("https://httpbin.org/get",{},function(){abortRequest(e),t.equal(e.readyState,4,"xhr readyState is '4' (DONE)"),t.equal(e.status,200,"xhr HTTP status is '200' (OK)"),t.end()})}),t.test("- request is not aborted if it is undefined",function(e){var t;try{abortRequest(t)}catch(t){e.fail("aborting an undefined request threw an error")}e.equal("undefined","undefined","undefined xhr was ignored"),e.end()}),t.end()});