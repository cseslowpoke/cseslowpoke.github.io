"use strict";var forEachEls=require("./foreach-els"),defaultSwitches=require("./switches");module.exports=function(o,i,e,t,s,n){var r=[];e.forEach(function(h){var e=t.querySelectorAll(h),l=s.querySelectorAll(h);if(this.log&&this.log("Pjax switch",h,e,l),e.length!==l.length)throw"DOM doesn’t look the same on new loaded page: ’"+h+"’ - new "+e.length+", old "+l.length;forEachEls(e,function(e,t){t=l[t];this.log&&this.log("newEl",e,"oldEl",t);e=o[h]?o[h].bind(this,t,e,n,i[h]):defaultSwitches.outerHTML.bind(this,t,e,n);r.push(e)},this)},this),this.state.numPendingSwitches=r.length,r.forEach(function(e){e()})};